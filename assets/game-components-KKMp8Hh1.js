import{r as k,g as Y}from"./react-vendor-gH-7aFTg.js";var b={exports:{}},A={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I;function W(){if(I)return A;I=1;var a=Symbol.for("react.transitional.element"),s=Symbol.for("react.fragment");function r(o,t,d){var u=null;if(d!==void 0&&(u=""+d),t.key!==void 0&&(u=""+t.key),"key"in t){d={};for(var _ in t)_!=="key"&&(d[_]=t[_])}else d=t;return t=d.ref,{$$typeof:a,type:o,key:u,ref:t!==void 0?t:null,props:d}}return A.Fragment=s,A.jsx=r,A.jsxs=r,A}var O;function B(){return O||(O=1,b.exports=W()),b.exports}var e=B(),x=k();const M=Y(x),$=["Meus pais se juntaram e fizeram uma saita nova que agora ______.","Ã‰ nessa loucura de dizer que nÃ£o te quero, vou negando as aparÃªncias, disfarcando ______.","_______ colocou o Brasil no mapa.","Viver cercado de ______.","O fio que faz a piada do pavÃª Ã© ______.","O editor das manchetes do Meia-Hora Ã© ______.","Um cara chamado Jacinto Pinto Ã© ______.","Mijar pela bunda Ã© ______.","Ser calvo aos 20 anos Ã© ______.","Acordar com fortes dores no cu Ã© ______.","A melhor coisa sobre ter 18 anos Ã© ______.","Minha avÃ³ sempre dizia: '______'.","O que mais me irrita no trabalho Ã© ______.","Se eu fosse presidente por um dia, eu ______.","A pior desculpa para chegar atrasado Ã© ______.","O que eu mais escondo dos meus pais Ã© ______.","A receita secreta da Coca-Cola na verdade Ã© ______.","O verdadeiro motivo da extinÃ§Ã£o dos dinossauros foi ______.","Se aliens visitassem a Terra, eles ficariam chocados com ______.","A Ãºnica coisa pior que acordar cedo Ã© ______.","Meu maior medo Ã© ______.","Se eu pudesse voltar no tempo, eu ______.","O que realmente acontece quando vocÃª morre Ã© ______.","A coisa mais embaraÃ§osa que jÃ¡ fiz foi ______.","Se eu fosse invisÃ­vel por um dia, eu ______.","O que eu faria com um milhÃ£o de reais seria ______.","A verdadeira razÃ£o pela qual o Brasil nÃ£o vai pra frente Ã© ______.","Se eu pudesse escolher minha morte, seria ______.","O que eu mais gostaria de falar para meu chefe Ã© ______.","A coisa mais nojenta que jÃ¡ comi foi ______.","Se eu pudesse ler mentes, descobriria que ______.","O que realmente acontece no banheiro feminino Ã© ______.","A profissÃ£o mais inÃºtil do mundo Ã© ______.","Se eu pudesse ter um superpoder, seria ______.","A coisa mais ridÃ­cula que jÃ¡ comprei foi ______.","O que eu faria se soubesse que o mundo ia acabar amanhÃ£ seria ______.","A verdadeira razÃ£o pela qual homens nÃ£o pedem informaÃ§Ã£o Ã© ______.","Se eu pudesse conversar com animais, perguntaria ______.","A coisa mais constrangedora que aconteceu comigo no mÃ©dico foi ______.","Se eu pudesse mudar uma coisa no meu corpo seria ______.","O que eu mais gostaria de esquecer Ã© ______.","A pior coisa sobre ser adulto Ã© ______.","Se eu pudesse viver para sempre, eu ______.","O que realmente acontece quando ninguÃ©m estÃ¡ olhando Ã© ______.","A coisa mais estranha que jÃ¡ sonhei foi ______.","Se eu pudesse trocar de vida com alguÃ©m por um dia, seria ______.","O que eu mais gostaria de dizer para meu ex Ã© ______.","A verdadeira razÃ£o pela qual sempre esqueÃ§o nomes Ã© ______.","Se eu pudesse criar uma lei, seria ______.","A coisa mais idiota que jÃ¡ acreditei foi ______.","O que eu faria se ganhasse na loteria seria ______.","A verdadeira razÃ£o pela qual as pessoas fazem selfie Ã© ______.","Se eu pudesse deletar algo da internet seria ______.","A coisa mais embaraÃ§osa no meu histÃ³rico de navegaÃ§Ã£o Ã© ______.","Se eu pudesse falar com meu eu de 10 anos atrÃ¡s, diria ______.","O que realmente pensam sobre mim quando nÃ£o estou por perto Ã© ______.","A pior tendÃªncia da moda foi ______.","Se eu pudesse banir uma coisa do mundo seria ______.","A coisa mais estranha que jÃ¡ encontrei no meu bolso foi ______.","Se eu pudesse hackear qualquer sistema, escolheria ______.","O que eu mais gostaria de automatizar na minha vida Ã© ______.","A verdadeira razÃ£o pela qual procrastino Ã© ______.","Se eu pudesse adicionar uma matÃ©ria na escola seria ______.","A coisa mais bizarra que jÃ¡ vi no transporte pÃºblico foi ______.","Se eu pudesse ter acesso a qualquer informaÃ§Ã£o secreta seria ______.","O que eu mais gostaria de perguntar para um polÃ­tico Ã© ______.","A verdadeira razÃ£o pela qual o Wi-Fi sempre falha quando preciso Ã© ______.","Se eu pudesse mudar o passado, mudaria ______.","A coisa mais ridÃ­cula que jÃ¡ fiz por amor foi ______.","Se eu pudesse controlar o clima por um dia, faria ______.","O que eu mais gostaria de confessar Ã© ______.","A verdadeira utilidade do apÃªndice humano Ã© ______.","Se eu pudesse dar um conselho para toda a humanidade seria ______.","A coisa mais inÃºtil que aprendi na escola foi ______.","Se eu pudesse reviver um dia da minha vida seria ______.","O que eu mais gostaria de desdizer Ã© ______.","A verdadeira razÃ£o pela qual gatos ronronam Ã© ______.","Se eu pudesse mudar uma regra social seria ______.","A coisa mais estranha que jÃ¡ aconteceu comigo num elevador foi ______.","Se eu pudesse inventar um feriado seria ______.","O que eu mais gostaria de explicar para as geraÃ§Ãµes futuras Ã© ______.","A verdadeira razÃ£o pela qual sempre perco meias na lavanderia Ã© ______.","Se eu pudesse adicionar um novo sentido ao corpo humano seria ______.","A coisa mais absurda que jÃ¡ acreditei quando crianÃ§a foi ______.","Se eu pudesse mudar o nome de alguma coisa seria ______.","O que eu mais gostaria de perguntar para Deus Ã© ______.","A verdadeira razÃ£o pela qual sempre esqueÃ§o onde coloquei as coisas Ã© ______.","Se eu pudesse criar um aplicativo seria para ______.","A coisa mais constrangedora que jÃ¡ aconteceu numa reuniÃ£o de famÃ­lia foi ______.","Se eu pudesse ter um animal de estimaÃ§Ã£o exÃ³tico seria ______.","O que eu mais gostaria de dizer para meu eu do futuro Ã© ______.","A verdadeira razÃ£o pela qual sempre fico preso no trÃ¢nsito Ã© ______.","Se eu pudesse mudar uma coisa na natureza humana seria ______.","A coisa mais ridÃ­cula que jÃ¡ fiz para impressionar alguÃ©m foi ______.","Se eu pudesse criar uma nova profissÃ£o seria ______.","O que eu mais gostaria de esquecer que existe Ã© ______."],V=["Um pÃªnis gigante","Fazer cocÃ´ de pÃ©","Minha virgindade","Cheirar o prÃ³prio sovaco","BebÃªs","Um anal bem feito","Peidar em elevador lotado","Comer pizza fria","Transar com o ex","Fingir que estÃ¡ dormindo","Lamber o prato","Usar calcinha suja","Chorar vendo filme da Xuxa","Dar match no Tinder com a prima","Cagar no banho","Masturbar-se pensando na sogra","Enfiar o dedo no nariz","Soltar pum durante o sexo","Comer lasanha com as mÃ£os","Fazer xixi no chuveiro","Cheirar a prÃ³pria cueca","Dar uma mijada Ã©pica","Comer pelo nariz","Transar de meia","Lamber o prÃ³prio cotovelo","Fazer cocÃ´ lÃ­quido","Cheirar peido dos outros","Comer meleca","Dar aquela estalada no saco","Chorar no banheiro","Mijar na pia","Cheirar o dedo depois de coÃ§ar","Comer cabelo","Transar com a luz acesa","Fazer strip-tease para o espelho","Lamber o prÃ³prio pÃ©","Cagar em shopping","Cheirar calcinha usada","Dar uma cusparada marota","Chorar vendo comercial de margarina","Mijar no mato","Cheirar a prÃ³pria bunda","Comer inseto","Transar no primeiro encontro","Fazer sexo oral mal feito","Lamber colher de nutella","Cagar de porta aberta","Cheirar pÃ© sujo","Dar uma babada","Chorar ouvindo Pablo Vittar","TrÃªs cromossomos","Uma lobotomia","Pelos pÃºbicos","DiarrÃ©ia explosiva","Um orgasmo mÃºltiplo","Sexo anal","Fazer xixi na cama","Chupar dedo do pÃ©","Um feto morto","Pornografia de anÃµes","Fazer cocÃ´ na rua","Cheirar cueca alheia","Dar o cu","Comer terra","Enfiar o dedo na bunda","Soltar gases tÃ³xicos","Chupar chupeta de crianÃ§a","Um aborto espontÃ¢neo","Pornografia incestuosa","Fazer xixi de pÃ© sendo mulher","Cheirar tÃªnis velho","Dar uma sentada","Comer cola","Enfiar cotonete na orelha","Soltar arroto alto","Chupar bico de mamadeira","Uma cirurgia plÃ¡stica mal feita","Pornografia gospel","Fazer cocÃ´ verde","Cheirar papel higiÃªnico usado","Dar uma mamada","Comer grama","Enfiar palito no dente","Soltar peido silencioso mas mortal","Chupar chuchu","Um parto prematuro","Pornografia com idosos","Fazer xixi amarelo neon","Cheirar desodorante vencido","Dar uma dedada","Comer papel","Enfiar cotonete no nariz","Soltar gases metanos","Chupar manga com sal","Uma ejaculaÃ§Ã£o precoce","Pornografia com animais","Fazer cocÃ´ pastoso","Cheirar meia suja","Dar uma chupada","Comer sabonete","Enfiar palito na unha","Soltar pum com cheiro de ovo podre","Chupar pirulito do chÃ£o","Uma ereÃ§Ã£o na hora errada","Pornografia bizarra","A menstruaÃ§Ã£o","Pelos no cu","Corrimento vaginal","Esperma de baleia","Uma fimose","HemorrÃ³idas","Fazer xixi em pÃºblico","Cheirar perfume barato","Dar uma roÃ§ada","Comer unha","Enfiar canudo no nariz","Soltar peido em igreja","Chupar limÃ£o sem aÃ§Ãºcar","Uma vasectomia","Pornografia amadora","Fazer cocÃ´ duro","Cheirar sabonete usado","Dar uma apertada","Comer isopor","Enfiar grampo no ouvido","Soltar gases em reuniÃ£o","Chupar osso de galinha","Uma laqueadura","Pornografia profissional","Fazer xixi espumoso","Cheirar pasta de dente vencida","Dar uma beliscada","Comer algodÃ£o","Enfiar clipe na pele","Soltar arroto em missa","Chupar caroÃ§o de manga","Uma circuncisÃ£o","Pornografia romÃ¢ntica","Fazer cocÃ´ com sangue","Cheirar shampoo estragado","Dar uma mordida","Comer borracha","Enfiar linha na gengiva","Soltar peido no cinema","Chupar gelo sujo","Uma histerectomia","Pornografia educativa","Fazer xixi com espuma","Cheirar condicionador azedo","Dar uma lambida","Comer madeira","Enfiar fio dental na orelha","Soltar gases no trabalho","Chupar bala velha","Uma mudanÃ§a de sexo","Pornografia cientÃ­fica","Fazer cocÃ´ lÃ­quido amarelo","Cheirar creme rinse estragado","Dar uma sugada","Comer cimento","Enfiar palito de fÃ³sforo no dente","Soltar arroto na escola","Chupar doce do chÃ£o","Uma operaÃ§Ã£o no saco","Pornografia filosÃ³fica","Fazer xixi roxo","Cheirar gel vencido","Dar uma esfregada","Comer tijolo","Enfiar agulha na unha","Soltar peido na academia","Chupar chiclete usado","Uma cirurgia Ã­ntima","Pornografia metafÃ­sica","Fazer cocÃ´ verde limÃ£o","Cheirar mousse estragado","Dar uma raspada","Comer ferro","Enfiar espinho no pÃ©","Soltar gases no elevador","Chupar sorvete derretido","Uma plÃ¡stica nos genitais","Pornografia existencial","Fazer xixi verde","Cheirar cera vencida","Dar uma cutucada","Comer vidro","Enfiar farpa na mÃ£o","Soltar arroto no hospital","Chupar bala azeda","Uma reversÃ£o de vasectomia","Pornografia minimalista","Fazer cocÃ´ marrom escuro","Cheirar pomada estragada","Dar uma agarrada","Comer concreto","Enfiar cisco no olho","Soltar peido na farmÃ¡cia","Chupar pirulito velho","Uma reconstruÃ§Ã£o vaginal","Pornografia maximalista","Fazer xixi laranja","Cheirar loÃ§Ã£o azeda","Dar uma espremida","Comer cal","Enfiar fiapo no nariz","Soltar gases no supermercado","Chupar doce pegajoso","Uma cirurgia estÃ©tica Ã­ntima","Pornografia impressionista","Fazer cocÃ´ preto","Cheirar Ã³leo vencido","Dar uma espreitada","Comer argila","Enfiar sujeira na orelha","Soltar arroto no restaurante","Chupar caramelo grudento","Uma mudanÃ§a hormonal","Pornografia cubista","Fazer xixi azul","Cheirar sabÃ£o estragado","Dar uma beliscadinha","Comer gesso","Enfiar pÃ³ no nariz","Soltar peido no Ã´nibus","Chupar bala derretida","Uma terapia hormonal","Pornografia surrealista","Fazer cocÃ´ amarelo","Cheirar detergente vencido","Dar uma coceguinha","Comer massa corrida","Enfiar poeira na boca","Soltar gases no metrÃ´","Chupar drops grudento","Uma reversÃ£o de laqueadura","Pornografia realista","Fazer xixi rosa","Cheirar amaciante azedo","Dar uma piscadinha","Comer tinta","Enfiar felpudo no dente","Soltar arroto no tÃ¡xi","Chupar jujuba velha","Uma cirurgia reconstrutiva","Pornografia abstrata","Fazer cocÃ´ cinza","Cheirar Ã¡lcool vencido","Dar uma puxadinha","Comer verniz","Enfiar pelos no nariz","Soltar peido no aviÃ£o","Chupar gelatina mole","Uma mudanÃ§a corporal radical","Pornografia conceitual","Fazer xixi transparente","Cheirar acetona estragada","Dar uma apertadinha","Comer massa de vidraceiro","Enfiar cabelo na garganta","Soltar gases no navio","Chupar pudim mole","Uma transformaÃ§Ã£o genÃ©tica","Pornografia dadaÃ­sta","Fazer cocÃ´ branco","Cheirar removedor vencido","Dar uma mordidinha","Comer cola de sapateiro","Enfiar linha na narina","Soltar arroto no trem","Chupar mousse derretido","Uma modificaÃ§Ã£o corporal","Pornografia pop art","Fazer xixi prateado","Cheirar thinner estragado","Dar uma lambidinha","Comer massa de calafetar","Enfiar fio na orelha","Soltar peido no barco","Chupar creme bavette","Uma alteraÃ§Ã£o fÃ­sica permanente","Pornografia neo-clÃ¡ssica","Fazer cocÃ´ dourado","Cheirar gasolina velha","Dar uma sugadinha","Comer betume","Enfiar barbante no nariz","Soltar gases na balsa","Chupar leite condensado azedo","Uma mutaÃ§Ã£o genÃ©tica","Pornografia barroca","Fazer xixi dourado","Cheirar querosene vencido","Dar uma chupetinha","Comer piche","Enfiar cordÃ£o na boca","Soltar arroto na lancha","Chupar mel cristalizado","Uma evoluÃ§Ã£o corporal","Pornografia gÃ³tica","Seus pais fazendo sexo","CrianÃ§as em uma mina de carvÃ£o","Uma saia justa constrangedora","DanÃ§ar atÃ© o chÃ£o","Fazer um stripper privado","Lamber bolas de golfe","Chupar uma banana seductivamente","AbraÃ§ar muito forte","Fingir um orgasmo","Gritar como Tarzan","Imitar um porno","DanÃ§ar funk","Fazer cara de ahegao","Gemer alto","Rebolar gostoso","Dar uma sentada Ã©pica","Fazer biquinho","Piscar seductivamente","Rebolado da Anitta","GemidÃ£o do WhatsApp"],L=a=>{const s=[...a];for(let r=s.length-1;r>0;r--){const o=Math.floor(Math.random()*(r+1));[s[r],s[o]]=[s[o],s[r]]}return s},J=(a,s=10)=>{const r=L(V),o={};return a.forEach((t,d)=>{const u=d*s,_=u+s;o[t.id]=r.slice(u,_)}),{playerHands:o,remainingCards:r.slice(a.length*s)}},Q=(a=[])=>{const s=$.filter(o=>!a.includes(o));if(s.length===0)return null;const r=Math.floor(Math.random()*s.length);return s[r]};function U(a,s){if(!a||!s)return 0;const r=a.toLowerCase(),o=s.toLowerCase();let t=30;const d=["cu","buceta","pau","merda","porra","caralho","fodendo","bosta","peido","mijando","cagando","bÃªbado","drogado","viado","puta","vagabundo"],u=["fazer","comendo","bebendo","danÃ§ando","cantando","pulando","correndo","gritando","chorando","rindo"],_=["dildo","garrafa","pepino","banana","melancia","salsicha","linguiÃ§a"];let E=0;return d.forEach(i=>{o.includes(i)&&(t+=15,E++)}),u.forEach(i=>{o.includes(i)&&(t+=8)}),_.forEach(i=>{o.includes(i)&&(t+=12)}),o.length>50&&(t+=10),o.length<20&&E>0&&(t+=15),["pessoa","coisa","algo","alguÃ©m","isso"].forEach(i=>{(o===i||o===`uma ${i}`||o===`um ${i}`)&&(t-=20)}),["primeiro","Ãºltima","melhor","pior","favorito","importante"].some(i=>r.includes(i))&&E>0&&(t+=20),Math.min(100,Math.max(0,t))}function K(a,s){if(!s||s.length===0)return null;const r=s.map(t=>({card:t,score:U(a,t)}));r.sort((t,d)=>d.score-t.score);const o=Math.random();return o<.7||r.length===1?r[0].card:o<.9&&r.length>1?r[1].card:r.length>2?r[2].card:r[0].card}function X(a,s){if(!s||Object.keys(s).length===0)return null;const o=Object.keys(s).map(d=>({playerId:d,score:U(a,s[d])}));o.sort((d,u)=>u.score-d.score);const t=Math.random();return t<.6||o.length===1?o[0].playerId:t<.9&&o.length>1?o[1].playerId:o.length>2?o[2].playerId:o[0].playerId}const G={LOBBY:["Preparados para rir atÃ© nÃ£o aguentar mais? ðŸµ","Vamos ver quem tem as cartas mais sacanas hoje! ðŸƒ","Bora comeÃ§ar logo essa farra, pessoal! ðŸŽ‰","Preparem-se para combinaÃ§Ãµes absolutamente absurdas! ðŸ˜‚","Que comece o caos! Adoro esse jogo! ðŸ”¥"],WAITING_FOR_PLAYERS:["Aguardando os atrasados... Como sempre! â°","Mais alguÃ©m vindo ou Ã© sÃ³ a galera raiz mesmo? ðŸ¤”","PaciÃªncia, pessoal. JÃ¡ comeÃ§a! âŒ›","Quem faltar vai perder risadas Ã©picas! ðŸ˜„"],PLAYING:["Escolham com sabedoria... ou nÃ£o! ðŸ˜ˆ","Essa rodada promete ser hilÃ¡ria! ðŸ¤£","AlguÃ©m vai se arrepender dessa escolha... ðŸ‘€","Quero ver quem tem coragem de jogar essa carta! ðŸ˜","Pensem rÃ¡pido! O tempo nÃ£o espera! â±ï¸","Essa vai ser boa, eu sinto! ðŸŽ­"],ROUND_VOTING:["Hora de escolher o FDP da rodada! ðŸ†","Qual combinaÃ§Ã£o foi a mais absurda? ðŸ¤”","Votem na resposta mais criativa (ou bizarra)! ðŸ˜‚","DecisÃ£o difÃ­cil, hein? Todas sÃ£o Ã³timas! ðŸ”¥","O FDP vai rir muito quando descobrir quem ganhou! ðŸ˜ˆ"],ROUND_RESULTS:["E o vencedor Ã©... ðŸ¥","Essa combinaÃ§Ã£o foi genial! ðŸŽ‰","ParabÃ©ns ao mais criativo (ou sem vergonha)! ðŸ†","Essa vai entrar para a histÃ³ria! ðŸ˜‚","PrÃ³xima rodada vem ainda melhor! ðŸ”¥"],GAME_OVER:["Que jogo Ã©pico! ParabÃ©ns ao campeÃ£o! ðŸ†ðŸŽ‰","Esse foi o melhor jogo que jÃ¡ vi! ðŸ¤©","O vencedor merece um trofÃ©u... ou terapia! ðŸ˜…","Obrigado pelas risadas, pessoal! Joguem de novo! ðŸµ","Jogo finalizado! Quem topa revanche? ðŸ”„"]};function Z(a){const s=G[a]||G.LOBBY;return s[Math.floor(Math.random()*s.length)]}const N={LOBBY:"LOBBY",WAITING_FOR_PLAYERS:"WAITING_FOR_PLAYERS",PLAYING:"PLAYING",ROUND_VOTING:"ROUND_VOTING",ROUND_RESULTS:"ROUND_RESULTS",GAME_OVER:"GAME_OVER"},ee={maxPlayers:8,minPlayers:3,cardsPerPlayer:10,winningScore:5,roundTimer:120,votingTimer:60,resultsDelaySec:10},H={gameState:N.LOBBY,gameConfig:ee,roomCode:null,isHost:!1,players:[],currentPlayer:null,currentFDP:null,currentQuestionCard:null,usedQuestionCards:[],playerHands:{},remainingAnswerCards:[],submittedAnswers:{},roundWinner:null,answerOrder:[],timeRemaining:null,gameHistory:[],scores:{},selectedCards:[],showResults:!1,error:null,loading:!1,streamMode:!1,kickedMessage:null},n={SET_GAME_CONFIG:"SET_GAME_CONFIG",SET_ROOM_CODE:"SET_ROOM_CODE",SET_IS_HOST:"SET_IS_HOST",SET_GAME_STATE:"SET_GAME_STATE",START_GAME:"START_GAME",ADD_PLAYER:"ADD_PLAYER",REMOVE_PLAYER:"REMOVE_PLAYER",SET_CURRENT_PLAYER:"SET_CURRENT_PLAYER",SET_CURRENT_FDP:"SET_CURRENT_FDP",UPDATE_PLAYER:"UPDATE_PLAYER",DEAL_CARDS:"DEAL_CARDS",SET_QUESTION_CARD:"SET_QUESTION_CARD",SUBMIT_ANSWER:"SUBMIT_ANSWER",SELECT_CARD:"SELECT_CARD",DESELECT_CARD:"DESELECT_CARD",CLEAR_SELECTED_CARDS:"CLEAR_SELECTED_CARDS",SET_ROUND_WINNER:"SET_ROUND_WINNER",NEXT_ROUND:"NEXT_ROUND",SET_TIME_REMAINING:"SET_TIME_REMAINING",SET_ERROR:"SET_ERROR",SET_LOADING:"SET_LOADING",SHOW_RESULTS:"SHOW_RESULTS",HIDE_RESULTS:"HIDE_RESULTS",RESET_GAME:"RESET_GAME",APPLY_SNAPSHOT:"APPLY_SNAPSHOT",SET_STREAM_MODE:"SET_STREAM_MODE",SET_KICKED_MESSAGE:"SET_KICKED_MESSAGE",SET_ANSWER_ORDER:"SET_ANSWER_ORDER"};function ae(a,s){switch(s.type){case n.SET_GAME_CONFIG:return{...a,gameConfig:{...a.gameConfig,...s.payload}};case n.SET_ROOM_CODE:return{...a,roomCode:s.payload};case n.SET_IS_HOST:return{...a,isHost:s.payload};case n.SET_GAME_STATE:{const r=s.payload;if(r===N.PLAYING&&!a.currentFDP&&a.players.length>0){console.warn("SET_GAME_STATE: Tentando entrar em PLAYING sem FDP. Definindo FDP automaticamente.");const o=a.players[0];return{...a,gameState:r,currentFDP:o.id}}return{...a,gameState:r}}case n.ADD_PLAYER:{const r=s.payload;return{...a,players:[...a.players,r],scores:{...a.scores,[r.id]:0}}}case n.REMOVE_PLAYER:{const r=s.payload;return{...a,players:a.players.filter(o=>o.id!==r),scores:Object.fromEntries(Object.entries(a.scores).filter(([o])=>o!==r))}}case n.SET_CURRENT_PLAYER:return{...a,currentPlayer:s.payload};case n.SET_CURRENT_FDP:return{...a,currentFDP:s.payload};case n.UPDATE_PLAYER:{const{playerId:r,updates:o}=s.payload;return{...a,players:a.players.map(t=>t.id===r?{...t,...o}:t)}}case n.DEAL_CARDS:{const{playerHands:r,remainingCards:o}=J(a.players,a.gameConfig.cardsPerPlayer);return{...a,playerHands:r,remainingAnswerCards:o}}case n.SET_QUESTION_CARD:{const r=Q(a.usedQuestionCards);return{...a,currentQuestionCard:r,usedQuestionCards:[...a.usedQuestionCards,r],submittedAnswers:{},roundWinner:null,answerOrder:[]}}case n.SUBMIT_ANSWER:{const{playerId:r,answerCard:o}=s.payload;return{...a,submittedAnswers:{...a.submittedAnswers,[r]:o},playerHands:{...a.playerHands,[r]:(a.playerHands[r]||[]).filter(t=>t!==o)}}}case n.SELECT_CARD:return{...a,selectedCards:[...a.selectedCards,s.payload]};case n.DESELECT_CARD:return{...a,selectedCards:a.selectedCards.filter(r=>r!==s.payload)};case n.CLEAR_SELECTED_CARDS:return{...a,selectedCards:[]};case n.SET_ROUND_WINNER:{const r=s.payload;return{...a,roundWinner:r,scores:{...a.scores,[r]:a.scores[r]+1},gameHistory:[...a.gameHistory,{question:a.currentQuestionCard,answers:a.submittedAnswers,winner:r,timestamp:new Date().toISOString()}]}}case n.NEXT_ROUND:{const r=a.players.filter(h=>h.id!==a.currentFDP),o={...a.playerHands};let t=0;const d=r.filter(h=>a.submittedAnswers[h.id]);if(a.remainingAnswerCards.length<d.length)return console.log("NEXT_ROUND: Cartas insuficientes para continuar. Terminando jogo."),{...a,gameState:N.GAME_OVER};r.forEach(h=>{if(Array.isArray(o[h.id])||(o[h.id]=[]),a.submittedAnswers[h.id]){const c=a.remainingAnswerCards[t];c&&(o[h.id]=[...o[h.id],c],t+=1)}});const _=(a.players.findIndex(h=>h.id===a.currentFDP)+1)%a.players.length,E=a.players[_].id;return console.log("NEXT_ROUND: FDP atual:",a.currentFDP,"PrÃ³ximo FDP:",E,"Jogador:",a.players[_].name),console.log("NEXT_ROUND: Reiniciando rodada com gameState PLAYING"),{...a,gameState:N.PLAYING,playerHands:o,remainingAnswerCards:a.remainingAnswerCards.slice(t),currentFDP:E,submittedAnswers:{},roundWinner:null,selectedCards:[],answerOrder:[],timeRemaining:a.gameConfig.roundTimer}}case n.START_GAME:{const r=L(a.players),o=r[0]?.id;return console.log("START_GAME: Iniciando jogo"),console.log("- Jogadores antes do embaralhamento:",a.players.map(t=>({id:t.id,name:t.name}))),console.log("- Jogadores apÃ³s embaralhamento:",r.map(t=>({id:t.id,name:t.name}))),console.log("- Primeiro FDP escolhido:",o),console.log("- Nome do FDP:",r[0]?.name),o?{...a,gameState:N.PLAYING,players:r,currentFDP:o,answerOrder:[]}:(console.error("ERRO: NÃ£o foi possÃ­vel escolher FDP - array de jogadores vazio!"),a)}case n.SET_TIME_REMAINING:return{...a,timeRemaining:s.payload};case n.SET_ERROR:return{...a,error:s.payload};case n.SET_LOADING:return{...a,loading:s.payload};case n.SET_STREAM_MODE:return{...a,streamMode:!!s.payload};case n.SET_KICKED_MESSAGE:return{...a,kickedMessage:s.payload||null};case n.SET_ANSWER_ORDER:return{...a,answerOrder:Array.isArray(s.payload)?s.payload:[]};case n.SHOW_RESULTS:return{...a,showResults:!0};case n.HIDE_RESULTS:return{...a,showResults:!1};case n.RESET_GAME:return{...H,currentPlayer:a.currentPlayer};case n.APPLY_SNAPSHOT:{const r=s.payload||{},o=a.currentPlayer,t={...r};t.isHost=a.isHost;const d=Array.isArray(r.players)?r.players:[],u=Array.isArray(a.players)?a.players:[],_=new Map;for(const c of d)_.set(c.id,c);for(const c of u)_.has(c.id)||_.set(c.id,c);t.players=Array.from(_.values());const E={...a.scores||{},...r.scores||{}};for(const c of t.players)E[c.id]===void 0&&(E[c.id]=0);t.scores=E;const h={...a.playerHands||{},...r.playerHands||{}};for(const c of t.players)Array.isArray(h[c.id])||(h[c.id]=[]);return t.playerHands=h,o&&(t.currentPlayer=o),t}default:return a}}const z=x.createContext();function ie({children:a}){const[s,r]=x.useReducer(ae,H),o=x.useRef(s),t=x.useRef(null),d=x.useRef(`client_${Math.random().toString(36).slice(2)}`),u=x.useRef(!1),_=x.useRef(null);x.useEffect(()=>{o.current=s},[s]);const E=M.useCallback(()=>{if(s.isHost)switch(s.gameState){case N.PLAYING:{const i=s.players.filter(m=>m.id!==s.currentFDP&&!s.submittedAnswers[m.id]);i.forEach(m=>{const j=s.playerHands[m.id][0];j&&r({type:n.SUBMIT_ANSWER,payload:{playerId:m.id,answerCard:j}})});const f=[...Array.from(new Set(Object.keys(s.submittedAnswers).concat(i.map(m=>m.id))))].sort(()=>Math.random()-.5);r({type:n.SET_ANSWER_ORDER,payload:f}),r({type:n.SET_GAME_STATE,payload:N.ROUND_VOTING}),s.gameConfig.votingTimer>0&&r({type:n.SET_TIME_REMAINING,payload:s.gameConfig.votingTimer}),setTimeout(()=>c(),0);break}case N.ROUND_VOTING:{const i=Object.keys(s.submittedAnswers);if(i.length>0){const g=i[Math.floor(Math.random()*i.length)];r({type:n.SET_ROUND_WINNER,payload:g}),(s.scores[g]||0)+1>=s.gameConfig.winningScore?(r({type:n.SET_GAME_STATE,payload:N.GAME_OVER}),setTimeout(()=>c(),10)):(r({type:n.SET_GAME_STATE,payload:N.ROUND_RESULTS}),setTimeout(()=>{r({type:n.NEXT_ROUND}),r({type:n.SET_QUESTION_CARD}),r({type:n.SET_GAME_STATE,payload:N.PLAYING}),r({type:n.SET_TIME_REMAINING,payload:s.gameConfig.roundTimer}),setTimeout(()=>c(),10)},(s.gameConfig?.resultsDelaySec??3)*1e3))}break}}},[s.isHost,s.gameState,s.players,s.currentFDP,s.submittedAnswers,s.playerHands,s.gameConfig?.votingTimer,s.gameConfig?.roundTimer,s.gameConfig?.resultsDelaySec]);x.useEffect(()=>{if(s.gameState!==N.PLAYING||!s.isHost)return;s.players.filter(g=>g.isBot&&g.id!==s.currentFDP).forEach(g=>{if(s.submittedAnswers[g.id])return;const f=2e3+Math.random()*6e3;setTimeout(()=>{const m=o.current;if(m.gameState!==N.PLAYING){console.log(`ðŸ¤– Bot ${g.name} cancelou jogada - jogo nÃ£o estÃ¡ em PLAYING`);return}if(m.submittedAnswers[g.id]){console.log(`ðŸ¤– Bot ${g.name} cancelou jogada - jÃ¡ jogou`);return}const j=m.playerHands[g.id]||[];if(j.length===0){console.log(`ðŸ¤– Bot ${g.name} nÃ£o tem cartas na mÃ£o`);return}const l=K(m.currentQuestionCard,j);l&&(console.log(`ðŸ¤– Bot ${g.name} escolheu carta:`,l),r({type:n.SUBMIT_ANSWER,payload:{playerId:g.id,answerCard:l}}),h("ANSWER_SUBMITTED",{playerId:g.id,answerCard:l}))},f)})},[s.gameState,s.players,s.currentFDP,s.submittedAnswers,s.isHost,s.playerHands]),x.useEffect(()=>{if(s.gameState!==N.ROUND_VOTING||!s.isHost)return;const i=s.players.find(f=>f.id===s.currentFDP);if(!i||!i.isBot)return;const g=3e3+Math.random()*4e3;setTimeout(()=>{if(o.current.gameState===N.ROUND_VOTING){const f=X(o.current.currentQuestionCard,o.current.submittedAnswers);f&&(console.log(`ðŸ¤– Bot FDP ${i.name} escolheu vencedor:`,f),r({type:n.SET_ROUND_WINNER,payload:f}),(o.current.scores[f]||0)+1>=o.current.gameConfig.winningScore?(r({type:n.SET_GAME_STATE,payload:N.GAME_OVER}),setTimeout(()=>c(),10)):(r({type:n.SET_GAME_STATE,payload:N.ROUND_RESULTS}),setTimeout(()=>c(),10),setTimeout(()=>{r({type:n.NEXT_ROUND}),r({type:n.SET_QUESTION_CARD}),r({type:n.SET_GAME_STATE,payload:N.PLAYING}),r({type:n.SET_TIME_REMAINING,payload:o.current.gameConfig.roundTimer}),setTimeout(()=>c(),10)},(o.current.gameConfig?.resultsDelaySec??3)*1e3)))}},g)},[s.gameState,s.players,s.currentFDP,s.isHost,s.submittedAnswers]),x.useEffect(()=>{let i;return s.timeRemaining>0?i=setTimeout(()=>{r({type:n.SET_TIME_REMAINING,payload:s.timeRemaining-1})},1e3):s.timeRemaining===0&&E(),()=>clearTimeout(i)},[s.timeRemaining,E]),x.useEffect(()=>{if(s.gameState===N.PLAYING){s.currentFDP||(console.error("INTEGRIDADE: Jogo em andamento sem FDP definido!"),s.isHost&&s.players.length>0&&(console.log("INTEGRIDADE: Host corrigindo - definindo primeiro jogador como FDP"),r({type:n.SET_CURRENT_FDP,payload:s.players[0].id})));const i=s.players.some(g=>g.id===s.currentFDP);s.currentFDP&&!i&&(console.error("INTEGRIDADE: FDP atual nÃ£o existe na lista de jogadores!"),s.isHost&&s.players.length>0&&(console.log("INTEGRIDADE: Host corrigindo - redefinindo FDP"),r({type:n.SET_CURRENT_FDP,payload:s.players[0].id})))}},[s.gameState,s.currentFDP,s.players,s.isHost]);const h=(i,g)=>{t.current&&t.current.postMessage({type:i,payload:g,sender:d.current,ts:Date.now()})},c=M.useCallback(()=>{u.current||h("STATE_SNAPSHOT",{...o.current})},[]);x.useEffect(()=>{if(!s.isHost||s.gameState!==N.PLAYING)return;const i=s.players.filter(m=>m.id!==s.currentFDP);if(i.length===0||!i.every(m=>s.submittedAnswers[m.id]))return;const f=[...i.map(m=>m.id)].sort(()=>Math.random()-.5);r({type:n.SET_ANSWER_ORDER,payload:f}),r({type:n.SET_GAME_STATE,payload:N.ROUND_VOTING}),s.gameConfig.votingTimer>0&&r({type:n.SET_TIME_REMAINING,payload:s.gameConfig.votingTimer}),setTimeout(()=>c(),0)},[s.isHost,s.gameState,s.players,s.currentFDP,s.submittedAnswers,s.gameConfig?.votingTimer,c]),x.useEffect(()=>{if(s.roomCode&&_.current!==s.roomCode){if(t.current)try{t.current.close()}catch{}const i=`fdp-room-${s.roomCode}`,g=new BroadcastChannel(i);t.current=g,_.current=s.roomCode,g.onmessage=f=>{const m=f.data||{};if(!m||m.sender===d.current)return;const{type:j,payload:l}=m;switch(j){case"PLAYER_JOIN":{o.current.players.some(p=>p.id===l.id)||r({type:n.ADD_PLAYER,payload:l}),o.current.isHost&&setTimeout(()=>c(),50);break}case"PLAYER_LEAVE":{r({type:n.REMOVE_PLAYER,payload:l});const v=o.current.currentPlayer?.id;v&&l===v&&r({type:n.SET_KICKED_MESSAGE,payload:"O host te removeu da sala."}),o.current.isHost&&c();break}case"STATE_SNAPSHOT":{u.current=!0,r({type:n.APPLY_SNAPSHOT,payload:l}),setTimeout(()=>{u.current=!1},0);break}case"ANSWER_SUBMITTED":{const{playerId:v,answerCard:p}=l||{};v&&p&&(r({type:n.SUBMIT_ANSWER,payload:{playerId:v,answerCard:p}}),o.current.isHost&&setTimeout(()=>{const y=o.current;if(y.gameState!==N.PLAYING)return;const T=y.players.filter(w=>w.id!==y.currentFDP).length,D=Object.keys(y.submittedAnswers).length;if(console.log(`ðŸ“Š Respostas: ${D}/${T} recebidas`),D>=T){console.log("âœ… Todas as respostas recebidas! AvanÃ§ando para votaÃ§Ã£o...");const q=[...Object.keys(y.submittedAnswers)].sort(()=>Math.random()-.5);r({type:n.SET_ANSWER_ORDER,payload:q}),r({type:n.SET_GAME_STATE,payload:N.ROUND_VOTING}),y.gameConfig.votingTimer>0&&r({type:n.SET_TIME_REMAINING,payload:y.gameConfig.votingTimer}),setTimeout(()=>c(),10)}},50));break}case"WINNER_SELECTED":{if(o.current.isHost){const v=l?.winnerId,p=o.current;v&&p.gameState===N.ROUND_VOTING&&(r({type:n.SET_ROUND_WINNER,payload:v}),(p.scores[v]||0)+1>=p.gameConfig.winningScore?(r({type:n.SET_GAME_STATE,payload:N.GAME_OVER}),setTimeout(()=>c(),10)):(r({type:n.SET_GAME_STATE,payload:N.ROUND_RESULTS}),setTimeout(()=>c(),10),setTimeout(()=>{r({type:n.NEXT_ROUND}),r({type:n.SET_QUESTION_CARD}),r({type:n.SET_GAME_STATE,payload:N.PLAYING}),r({type:n.SET_TIME_REMAINING,payload:o.current.gameConfig.roundTimer}),setTimeout(()=>c(),10)},(o.current.gameConfig?.resultsDelaySec??3)*1e3)))}break}case"SNAPSHOT_REQUEST":{o.current.isHost&&c();break}}},o.current.currentPlayer&&h("PLAYER_JOIN",o.current.currentPlayer),o.current.isHost||setTimeout(()=>h("SNAPSHOT_REQUEST",null),50)}return()=>{}},[s.roomCode,s.isHost,c]),x.useEffect(()=>{const i=()=>{if(o.current.currentPlayer)try{h("PLAYER_LEAVE",o.current.currentPlayer.id)}catch{}};return window.addEventListener("beforeunload",i),()=>window.removeEventListener("beforeunload",i)},[]);const S={setGameConfig:i=>{if(!s.isHost){r({type:n.SET_ERROR,payload:"Somente o host pode alterar as configuraÃ§Ãµes."});return}r({type:n.SET_GAME_CONFIG,payload:i}),s.isHost&&setTimeout(()=>c(),0)},setRoomCode:i=>{s.roomCode&&!s.isHost||r({type:n.SET_ROOM_CODE,payload:i})},setIsHost:i=>r({type:n.SET_IS_HOST,payload:i}),setGameState:i=>r({type:n.SET_GAME_STATE,payload:i}),addPlayer:i=>{if(console.log("ðŸ”§ DEBUG addPlayer: Tentando adicionar player:",i),console.log("ðŸ”§ DEBUG addPlayer: Estado atual players:",s.players.length),i?.isBot&&!s.isHost){r({type:n.SET_ERROR,payload:"Somente o host pode adicionar bots."});return}r({type:n.ADD_PLAYER,payload:i}),h("PLAYER_JOIN",i)},removePlayer:i=>{const g=s.currentPlayer&&s.currentPlayer.id===i;if(!s.isHost&&!g){r({type:n.SET_ERROR,payload:"Somente o host pode remover outros jogadores."});return}r({type:n.REMOVE_PLAYER,payload:i}),h("PLAYER_LEAVE",i)},setCurrentPlayer:i=>r({type:n.SET_CURRENT_PLAYER,payload:i}),updatePlayer:(i,g)=>r({type:n.UPDATE_PLAYER,payload:{playerId:i,updates:g}}),startGame:()=>{if(!s.isHost){r({type:n.SET_ERROR,payload:"Somente o host pode iniciar o jogo."});return}if(s.players.length<s.gameConfig.minPlayers){r({type:n.SET_ERROR,payload:`MÃ­nimo de ${s.gameConfig.minPlayers} jogadores necessÃ¡rio.`});return}console.log("====== INICIANDO JOGO ======"),console.log("startGame: Jogadores disponÃ­veis:",s.players.map(i=>({id:i.id,name:i.name}))),console.log("startGame: Total de jogadores:",s.players.length),console.log("startGame: Distribuindo cartas..."),r({type:n.DEAL_CARDS}),console.log("startGame: Iniciando jogo e definindo FDP..."),r({type:n.START_GAME}),console.log("startGame: Definindo carta de pergunta..."),r({type:n.SET_QUESTION_CARD}),console.log("startGame: Iniciando timer..."),r({type:n.SET_TIME_REMAINING,payload:s.gameConfig.roundTimer}),console.log("====== FIM DA INICIALIZAÃ‡ÃƒO ======"),setTimeout(()=>{s.isHost&&(console.log("startGame: Enviando snapshot para clientes..."),c())},100)},submitAnswer:i=>{if(s.currentPlayer&&s.currentPlayer.id!==s.currentFDP){if(s.submittedAnswers[s.currentPlayer.id])return;if(r({type:n.SUBMIT_ANSWER,payload:{playerId:s.currentPlayer.id,answerCard:i}}),h("ANSWER_SUBMITTED",{playerId:s.currentPlayer.id,answerCard:i}),s.isHost||setTimeout(()=>h("SNAPSHOT_REQUEST",null),80),s.isHost){const g=s.players.filter(j=>j.id!==s.currentFDP).length,f=Object.keys(s.submittedAnswers).filter(j=>j!==s.currentFDP);if(new Set([...f,s.currentPlayer.id]).size>=g&&s.gameState===N.PLAYING){const l=[...Array.from(new Set([...f,s.currentPlayer.id]))].sort(()=>Math.random()-.5);r({type:n.SET_ANSWER_ORDER,payload:l}),r({type:n.SET_GAME_STATE,payload:N.ROUND_VOTING}),s.gameConfig.votingTimer>0&&r({type:n.SET_TIME_REMAINING,payload:s.gameConfig.votingTimer}),setTimeout(()=>c(),0)}}}},selectWinner:i=>{if(!s.currentPlayer||s.currentPlayer.id!==s.currentFDP)return;if(!s.isHost){h("WINNER_SELECTED",{winnerId:i});return}r({type:n.SET_ROUND_WINNER,payload:i}),(s.scores[i]||0)+1>=s.gameConfig.winningScore?(r({type:n.SET_GAME_STATE,payload:N.GAME_OVER}),setTimeout(()=>c(),10)):(r({type:n.SET_GAME_STATE,payload:N.ROUND_RESULTS}),setTimeout(()=>c(),10),setTimeout(()=>{r({type:n.NEXT_ROUND}),r({type:n.SET_QUESTION_CARD}),r({type:n.SET_GAME_STATE,payload:N.PLAYING}),r({type:n.SET_TIME_REMAINING,payload:s.gameConfig.roundTimer}),setTimeout(()=>c(),10)},(s.gameConfig?.resultsDelaySec??3)*1e3))},selectCard:i=>r({type:n.SELECT_CARD,payload:i}),deselectCard:i=>r({type:n.DESELECT_CARD,payload:i}),clearSelectedCards:()=>r({type:n.CLEAR_SELECTED_CARDS}),startTimer:i=>r({type:n.SET_TIME_REMAINING,payload:i}),stopTimer:()=>r({type:n.SET_TIME_REMAINING,payload:null}),setError:i=>r({type:n.SET_ERROR,payload:i}),setLoading:i=>r({type:n.SET_LOADING,payload:i}),setStreamMode:i=>{if(!s.isHost){r({type:n.SET_ERROR,payload:"Somente o host pode alterar a visibilidade do cÃ³digo da sala."});return}r({type:n.SET_STREAM_MODE,payload:i}),s.isHost&&setTimeout(()=>c(),0)},showResults:()=>r({type:n.SHOW_RESULTS}),hideResults:()=>r({type:n.HIDE_RESULTS}),setKickedMessage:i=>r({type:n.SET_KICKED_MESSAGE,payload:i}),resetGame:()=>{r({type:n.RESET_GAME}),s.isHost&&setTimeout(()=>c(),0)}};return e.jsx(z.Provider,{value:{state:s,actions:S,GAME_STATES:N},children:a})}function C(){const a=x.useContext(z);if(!a)throw new Error("useGame deve ser usado dentro de um GameProvider");return a}function P({size:a=96,variant:s="inline",floating:r=!0,glow:o=!0,speech:t,ariaLabel:d="Mascote do jogo",className:u=""}){const _=typeof a=="number"?`${a}px`:a;return e.jsxs("div",{className:`mascot ${s==="hero"?"mascot--hero":"mascot--inline"} ${r?"is-floating":""} ${o?"has-glow":""} ${u}`,style:{"--mascot-size":_},role:"img","aria-label":d,children:[e.jsx("div",{className:"mascot-ring","aria-hidden":"true"}),e.jsx("img",{className:"mascot-img",src:"/fdp/mascot_monkey.svg",alt:"",loading:"lazy"}),t&&e.jsx("div",{className:"mascot-speech","aria-hidden":"true",children:t})]})}function F({onJoinRoom:a,onBack:s}){const{actions:r}=C(),[o,t]=x.useState([]),[d,u]=x.useState(""),[_,E]=x.useState(!1),[h,c]=x.useState(!1),S=async()=>{c(!0),await new Promise(v=>setTimeout(v,1e3));const l=[{id:"pub_001",name:"Sala dos Amigos",host:"JoÃ£o123",players:4,maxPlayers:8,status:"WAITING_FOR_PLAYERS",isPrivate:!1,created:new Date(Date.now()-600*1e3),gameConfig:{winningScore:5,roundTimer:120}},{id:"pub_002",name:"FDP Hardcore",host:"ProPlayer",players:6,maxPlayers:8,status:"PLAYING",isPrivate:!1,created:new Date(Date.now()-1500*1e3),gameConfig:{winningScore:7,roundTimer:90}},{id:"pub_003",name:"DiversÃ£o Garantida ðŸ˜‚",host:"EngraÃ§ado",players:2,maxPlayers:6,status:"WAITING_FOR_PLAYERS",isPrivate:!1,created:new Date(Date.now()-300*1e3),gameConfig:{winningScore:5,roundTimer:120}},{id:"pub_004",name:"SÃ³ os Brabo",host:"MasterFDP",players:7,maxPlayers:8,status:"WAITING_FOR_PLAYERS",isPrivate:!1,created:new Date(Date.now()-180*1e3),gameConfig:{winningScore:10,roundTimer:60}},{id:"pub_005",name:"Iniciantes Bem-vindos",host:"Helper",players:1,maxPlayers:4,status:"WAITING_FOR_PLAYERS",isPrivate:!1,created:new Date(Date.now()-60*1e3),gameConfig:{winningScore:3,roundTimer:180}}];t(l),c(!1)};x.useEffect(()=>{S()},[]);const i=o.filter(l=>l.name.toLowerCase().includes(d.toLowerCase())||l.host.toLowerCase().includes(d.toLowerCase())),g=async l=>{if(l.players>=l.maxPlayers){r.setError("Sala lotada!");return}if(l.status==="PLAYING"){r.setError("Jogo jÃ¡ em andamento!");return}E(!0);try{await new Promise(v=>setTimeout(v,1500)),a(l.id,l.name)}catch(v){console.error("Erro ao entrar na sala:",v),r.setError("Erro ao entrar na sala")}finally{E(!1)}},f=l=>{switch(l){case"WAITING_FOR_PLAYERS":return"â³";case"PLAYING":return"ðŸŽ®";default:return"â“"}},m=l=>{switch(l){case"WAITING_FOR_PLAYERS":return"Aguardando";case"PLAYING":return"Jogando";default:return"Desconhecido"}},j=l=>{const v=Math.floor((Date.now()-l.getTime())/6e4);if(v<1)return"Agora";if(v===1)return"1 min";if(v<60)return`${v} min`;const p=Math.floor(v/60);return p===1?"1 hora":`${p} horas`};return e.jsxs("div",{className:"public-rooms",children:[e.jsxs("div",{className:"public-rooms-header",children:[e.jsxs("button",{className:"back-btn",onClick:s,children:[e.jsx("span",{children:"â†"})," Voltar"]}),e.jsx("h2",{children:"ðŸŒ Salas PÃºblicas"}),e.jsxs("button",{className:`refresh-btn ${h?"loading":""}`,onClick:S,disabled:h,children:["ðŸ”„ ",h?"Atualizando...":"Atualizar"]})]}),e.jsx("div",{className:"search-section",children:e.jsxs("div",{className:"search-box",children:[e.jsx("span",{className:"search-icon",children:"ðŸ”"}),e.jsx("input",{type:"text",placeholder:"Buscar por nome da sala ou host...",value:d,onChange:l=>u(l.target.value),className:"search-input"}),d&&e.jsx("button",{className:"clear-search",onClick:()=>u(""),children:"âœ•"})]})}),e.jsxs("div",{className:"rooms-list",children:[_&&e.jsxs("div",{className:"loading-overlay",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Entrando na sala..."})]}),i.length===0&&!h&&e.jsxs("div",{className:"no-rooms",children:[e.jsx("span",{className:"no-rooms-icon",children:"ðŸ˜”"}),e.jsx("h3",{children:"Nenhuma sala encontrada"}),e.jsx("p",{children:d?"Tente buscar por outros termos ou limpe a busca":"NÃ£o hÃ¡ salas pÃºblicas disponÃ­veis no momento"}),e.jsx("button",{className:"btn btn-primary",onClick:S,children:"ðŸ”„ Tentar novamente"})]}),i.map(l=>e.jsxs("div",{className:"room-card",children:[e.jsxs("div",{className:"room-info",children:[e.jsxs("div",{className:"room-header",children:[e.jsx("h3",{className:"room-name",children:l.name}),e.jsxs("div",{className:"room-status",children:[e.jsx("span",{className:"status-icon",children:f(l.status)}),e.jsx("span",{className:"status-text",children:m(l.status)})]})]}),e.jsxs("div",{className:"room-details",children:[e.jsxs("div",{className:"room-host",children:[e.jsx("span",{className:"detail-icon",children:"ðŸ‘‘"}),e.jsxs("span",{children:["Host: ",e.jsx("strong",{children:l.host})]})]}),e.jsxs("div",{className:"room-players",children:[e.jsx("span",{className:"detail-icon",children:"ðŸ‘¥"}),e.jsxs("span",{children:[e.jsxs("strong",{children:[l.players,"/",l.maxPlayers]})," jogadores"]})]}),e.jsxs("div",{className:"room-config",children:[e.jsx("span",{className:"detail-icon",children:"ðŸŽ¯"}),e.jsxs("span",{children:[l.gameConfig.winningScore," pontos para vencer"]})]}),e.jsxs("div",{className:"room-timer",children:[e.jsx("span",{className:"detail-icon",children:"â±ï¸"}),e.jsxs("span",{children:[l.gameConfig.roundTimer,"s por rodada"]})]})]}),e.jsx("div",{className:"room-meta",children:e.jsxs("span",{className:"room-age",children:["Criada hÃ¡ ",j(l.created)]})})]}),e.jsx("div",{className:"room-actions",children:e.jsx("button",{className:`join-btn ${l.players>=l.maxPlayers?"full":l.status==="PLAYING"?"playing":"available"}`,onClick:()=>g(l),disabled:l.players>=l.maxPlayers||l.status==="PLAYING"||_,children:l.players>=l.maxPlayers?e.jsx(e.Fragment,{children:"ðŸš« Lotada"}):l.status==="PLAYING"?e.jsx(e.Fragment,{children:"ðŸŽ® Jogando"}):e.jsx(e.Fragment,{children:"ðŸš€ Entrar"})})})]},l.id))]})]})}function te(){const{state:a,actions:s,GAME_STATES:r}=C(),[o,t]=x.useState(""),[d,u]=x.useState(""),[_,E]=x.useState(!1),h=x.useCallback(()=>{if(a.error){const f=setTimeout(()=>{s.setError(null)},5e3);return()=>clearTimeout(f)}},[a.error,s]);if(x.useEffect(()=>{if(_)return e.jsx(F,{onJoinRoom:i,onBack:()=>E(!1)})},[a.error,h]),_)return e.jsx(F,{onJoinRoom:i,onBack:()=>E(!1)});const c=()=>Math.random().toString(36).substring(2,8).toUpperCase(),S=(f=!1)=>{if(!o.trim()){s.setError("Digite seu nome antes de criar a sala!");return}const m=c(),j={id:`player_${Date.now()}`,name:o.trim(),isHost:!0,avatar:`https://ui-avatars.com/api/?name=${encodeURIComponent(o)}&background=random`};s.setIsHost(!0),s.setCurrentPlayer(j),s.setRoomCode(m),s.addPlayer(j),s.setGameState(r.WAITING_FOR_PLAYERS),s.setError(null),f&&console.log("Criando sala pÃºblica:",m)},i=(f,m)=>{if(!o.trim()){s.setError("Digite seu nome primeiro!"),E(!1);return}const j={id:`player_${Date.now()}`,name:o.trim(),isHost:!1,avatar:`https://ui-avatars.com/api/?name=${encodeURIComponent(o)}&background=random`};s.setIsHost(!1),s.setCurrentPlayer(j),s.addPlayer(j),s.setRoomCode(f),s.setGameState(r.WAITING_FOR_PLAYERS),s.setError(null),console.log(`Entrando na sala pÃºblica: ${m} (${f})`)},g=()=>{if(!o.trim()){s.setError("Digite seu nome para entrar na sala!");return}if(!d.trim()){s.setError("Digite o cÃ³digo da sala!");return}const f={id:`player_${Date.now()}`,name:o.trim(),isHost:!1,avatar:`https://ui-avatars.com/api/?name=${encodeURIComponent(o)}&background=random`};s.setIsHost(!1),s.setCurrentPlayer(f),s.setRoomCode(d.trim()),s.addPlayer(f),s.setGameState(r.WAITING_FOR_PLAYERS),s.setError(null)};return e.jsx("div",{className:"lobby",children:e.jsxs("div",{className:"lobby-container",children:[e.jsx("div",{className:"lobby-header-compact",children:e.jsxs("div",{className:"brand-section",children:[e.jsx(P,{variant:"hero",size:80,className:"mascot-hero"}),e.jsx("div",{className:"brand-text",children:e.jsxs("h1",{className:"game-title-compact",children:[e.jsx("span",{className:"title-main",children:"Foi De PropÃ³sito"}),e.jsx("span",{className:"title-subtitle",children:"O jogo mais FDP que existe!"})]})})]})}),e.jsxs("div",{className:"lobby-two-columns",children:[e.jsx("div",{className:"left-column",children:e.jsxs("div",{className:"actions-section",children:[e.jsx("h2",{children:"ðŸŽ® ComeÃ§ar a Jogar"}),e.jsxs("div",{className:"name-form-compact",children:[e.jsx("label",{children:"Seu nome no jogo:"}),e.jsxs("div",{className:"input-group-compact",children:[e.jsx("input",{type:"text",placeholder:"Digite seu nome...",value:o,onChange:f=>t(f.target.value),onKeyPress:f=>f.key==="Enter"&&S(),maxLength:20,className:"name-input-compact"}),o&&e.jsx("div",{className:"avatar-preview-compact",children:e.jsx("img",{src:`https://ui-avatars.com/api/?name=${encodeURIComponent(o)}&background=random`,alt:"Avatar",className:"avatar-compact"})})]})]}),e.jsxs("div",{className:"game-options",children:[e.jsxs("div",{className:"option-card",children:[e.jsxs("div",{className:"option-header",children:[e.jsx("span",{className:"option-icon",children:"ðŸŽ®"}),e.jsx("h3",{children:"Criar Nova Sala"})]}),e.jsx("p",{children:"Crie uma sala e convide seus amigos!"}),e.jsxs("div",{className:"option-buttons",children:[e.jsx("button",{className:"btn btn-create-private btn-full",onClick:()=>S(!1),disabled:!o.trim(),children:"ðŸ”’ Sala Privada"}),e.jsx("button",{className:"btn btn-create-public btn-full",onClick:()=>S(!0),disabled:!o.trim(),children:"ðŸŒ Sala PÃºblica"})]})]}),e.jsxs("div",{className:"option-card",children:[e.jsxs("div",{className:"option-header",children:[e.jsx("span",{className:"option-icon",children:"ðŸšª"}),e.jsx("h3",{children:"Entrar por CÃ³digo"})]}),e.jsx("p",{children:"Tem um cÃ³digo de sala? Cole aqui!"}),e.jsxs("div",{className:"join-form",children:[e.jsx("input",{type:"text",placeholder:"CÃ³digo da sala (ex: ABC123)",value:d,onChange:f=>u(f.target.value.toUpperCase()),onKeyPress:f=>f.key==="Enter"&&g(),maxLength:10,className:"code-input"}),e.jsx("button",{className:"btn btn-join-code btn-full",onClick:g,disabled:!o.trim()||!d.trim(),children:"Entrar na Sala"})]})]}),e.jsxs("div",{className:"option-card",children:[e.jsxs("div",{className:"option-header",children:[e.jsx("span",{className:"option-icon",children:"ðŸŒ"}),e.jsx("h3",{children:"Salas PÃºblicas"})]}),e.jsx("p",{children:"Descubra salas abertas para todos!"}),e.jsx("button",{className:"btn btn-public-rooms btn-full",onClick:()=>E(!0),disabled:!o.trim(),children:"Explorar Salas PÃºblicas"})]})]}),a.error&&e.jsxs("div",{className:"error-message",children:["âŒ ",a.error]})]})}),e.jsx("div",{className:"right-column",children:e.jsxs("div",{className:"info-section",children:[e.jsxs("div",{className:"about-game",children:[e.jsx("h2",{children:"ðŸŽ­ Sobre o Jogo"}),e.jsx("p",{className:"game-description-compact",children:"Prepare-se para muitas risadas, absurdos e momentos inesquecÃ­veis! Complete as frases da maneira mais escrota possÃ­vel e conquiste pontos fazendo todo mundo rir!"})]}),e.jsxs("div",{className:"rules-compact",children:[e.jsx("h3",{children:"ðŸŽ¯ Como Jogar"}),e.jsxs("div",{className:"rules-list",children:[e.jsxs("div",{className:"rule-item-compact",children:[e.jsx("span",{className:"rule-number",children:"1"}),e.jsxs("div",{className:"rule-text",children:[e.jsx("strong",{children:"DistribuiÃ§Ã£o:"})," Cada jogador recebe 10 cartas de resposta"]})]}),e.jsxs("div",{className:"rule-item-compact",children:[e.jsx("span",{className:"rule-number",children:"2"}),e.jsxs("div",{className:"rule-text",children:[e.jsx("strong",{children:"Pergunta:"})," O FDP da vez lÃª uma carta de pergunta"]})]}),e.jsxs("div",{className:"rule-item-compact",children:[e.jsx("span",{className:"rule-number",children:"3"}),e.jsxs("div",{className:"rule-text",children:[e.jsx("strong",{children:"Resposta:"})," Todos escolhem a carta mais engraÃ§ada"]})]}),e.jsxs("div",{className:"rule-item-compact",children:[e.jsx("span",{className:"rule-number",children:"4"}),e.jsxs("div",{className:"rule-text",children:[e.jsx("strong",{children:"VotaÃ§Ã£o:"})," O FDP escolhe a melhor resposta (1 ponto)"]})]}),e.jsxs("div",{className:"rule-item-compact",children:[e.jsx("span",{className:"rule-number",children:"5"}),e.jsxs("div",{className:"rule-text",children:[e.jsx("strong",{children:"VitÃ³ria:"})," Primeiro a fazer 5 pontos ganha!"]})]})]})]}),e.jsxs("div",{className:"tips-section",children:[e.jsx("h3",{children:"ðŸ’¡ Dicas"}),e.jsxs("ul",{className:"tips-list",children:[e.jsx("li",{children:"ðŸŽ­ Seja criativo e pense fora da caixa"}),e.jsx("li",{children:"ðŸ˜‚ Quanto mais absurdo, melhor!"}),e.jsx("li",{children:"ðŸŽ¯ ConheÃ§a o humor do seu grupo"}),e.jsx("li",{children:"âš¡ Seja rÃ¡pido nas escolhas"}),e.jsx("li",{children:"ðŸ† Divirta-se, ganhar Ã© secundÃ¡rio!"})]})]}),e.jsx("div",{className:"warning-section",children:e.jsxs("div",{className:"warning-card",children:[e.jsx("span",{className:"warning-icon",children:"âš ï¸"}),e.jsxs("div",{className:"warning-text",children:[e.jsx("strong",{children:"ConteÃºdo Adulto"}),e.jsx("p",{children:"Este jogo contÃ©m humor Ã¡cido e politicamente incorreto. Recomendado apenas para maiores de 18 anos."})]})]})})]})})]}),e.jsx("div",{className:"lobby-footer-compact",children:e.jsx("p",{children:"VersÃ£o Web â€¢ Baseado no jogo original Foi De PropÃ³sito"})})]})})}function ce(){const{state:a,actions:s,GAME_STATES:r}=C(),[o,t]=x.useState(a.gameConfig),[d,u]=x.useState(!1),[_,E]=x.useState(!1);x.useEffect(()=>{a.players.length===0&&a.currentPlayer&&a.isHost&&s.addPlayer(a.currentPlayer)},[a.players.length,a.currentPlayer,a.isHost,s]),x.useEffect(()=>{a.isHost&&E(!!a.streamMode)},[a.streamMode,a.isHost]);const h=()=>{if(a.players.length<a.gameConfig.minPlayers){s.setError(`MÃ­nimo de ${a.gameConfig.minPlayers} jogadores necessÃ¡rios!`);return}s.startGame()},c=()=>{s.resetGame()},S=(m,j)=>{const l={...o,[m]:j};t(l)},i=()=>{s.setGameConfig(o),u(!1),s.setError(null)},g=()=>{a.isHost&&navigator.clipboard.writeText(a.roomCode).then(()=>{const m=document.querySelector(".copy-button");m.textContent="âœ“ Copiado!",setTimeout(()=>{m.textContent="ðŸ“‹ Copiar"},2e3)})},f=()=>{if(!a.isHost){s.setError("Somente o host pode adicionar bots.");return}const j=["Bot Malandro","Bot Escroto","Bot Safado","Bot Debochado","Bot Inconveniente"].filter(l=>!a.players.some(v=>v.name===l));if(j.length>0&&a.players.length<a.gameConfig.maxPlayers){const l=j[0],v={id:`bot_${Date.now()}`,name:l,isHost:!1,isBot:!0,avatar:`https://ui-avatars.com/api/?name=${encodeURIComponent(l)}&background=random&color=fff`};s.addPlayer(v)}};return e.jsx("div",{className:"waiting-room",children:e.jsxs("div",{className:"waiting-room-container",children:[e.jsxs("div",{className:"room-header",children:[e.jsxs("div",{className:"room-title-wrap",children:[e.jsx(P,{variant:"inline",size:42,className:"mascot-inline"}),e.jsx("h1",{className:"room-title",children:"Sala de Espera"})]}),e.jsxs("div",{className:"room-info",children:[e.jsxs("div",{className:"room-code-display",children:[e.jsx("span",{className:"room-code-label",children:"CÃ³digo da Sala:"}),e.jsx("span",{className:`room-code ${a.streamMode&&(!a.isHost||_)?"blurred":""}`,title:a.streamMode?a.isHost?_?"Stream Mode ativo: cÃ³digo oculto para vocÃª e para os outros jogadores":"Stream Mode ativo: cÃ³digo visÃ­vel para vocÃª e oculto para os outros":"Stream Mode: cÃ³digo oculto pelo host":"CÃ³digo da sala",children:a.roomCode}),a.isHost?e.jsx("button",{className:"copy-button",onClick:g,disabled:!a.roomCode,children:"ðŸ“‹ Copiar"}):e.jsx("button",{className:"copy-button",disabled:!0,title:"Somente o host pode copiar",children:"ðŸ“‹ Copiar"}),a.isHost&&e.jsx("button",{className:"toggle-stream-btn",onClick:()=>s.setStreamMode(!a.streamMode),title:a.streamMode?"Desativar Stream Mode (mostrar cÃ³digo)":"Ativar Stream Mode (ocultar cÃ³digo)","aria-pressed":a.streamMode,children:a.streamMode?"ðŸ™ˆ":"ðŸ‘ï¸"}),a.isHost&&a.streamMode&&e.jsx("button",{className:"toggle-stream-btn",onClick:()=>E(!_),title:_?"Mostrar cÃ³digo para mim":"Ocultar cÃ³digo para mim tambÃ©m","aria-pressed":_,children:_?"ðŸ‘ï¸â€ðŸ—¨ï¸":"ðŸ™Š"})]}),e.jsxs("div",{className:"player-count",children:[a.players.length,"/",a.gameConfig.maxPlayers," jogadores"]})]}),a.streamMode&&e.jsxs("div",{className:"stream-mode-badge",title:a.isHost?"Stream Mode ativo: o cÃ³digo estÃ¡ visÃ­vel para vocÃª e oculto para os demais jogadores.":"Stream Mode ativo: o host ocultou o cÃ³digo da sala.","aria-label":"Stream Mode ativo",children:[e.jsx("span",{className:"badge-icon","aria-hidden":!0,children:"ðŸ™ˆ"}),a.isHost?"Stream Mode ativo":"CÃ³digo oculto pelo host"]})]}),e.jsxs("div",{className:"players-section",children:[e.jsx("h2",{children:"Jogadores na Sala"}),e.jsxs("div",{className:"players-grid",children:[a.players.map(m=>e.jsxs("div",{className:`player-card ${m.isHost?"host":""} ${m.id===a.currentPlayer?.id?"current":""}`,children:[e.jsxs("div",{className:"player-avatar",children:[e.jsx("img",{src:m.avatar,alt:m.name}),m.isHost&&e.jsx("span",{className:"host-crown",children:"ðŸ‘‘"}),m.isBot&&e.jsx("span",{className:"bot-badge",children:"ðŸ¤–"})]}),e.jsxs("div",{className:"player-info",children:[e.jsx("div",{className:"player-name",children:m.name}),e.jsx("div",{className:"player-status",children:m.isHost?"Host":m.isBot?"Bot":"Jogador"})]}),a.isHost&&!m.isHost&&e.jsx("button",{className:"remove-player-btn",onClick:()=>s.removePlayer(m.id),children:"âœ•"})]},m.id)),Array.from({length:a.gameConfig.maxPlayers-a.players.length},(m,j)=>e.jsx("div",{className:"player-card empty",children:e.jsxs("div",{className:"empty-slot",children:[e.jsx("span",{className:"empty-icon",children:"ðŸ‘¤"}),e.jsx("span",{className:"empty-text",children:"Aguardando..."})]})},`empty-${j}`))]})]}),e.jsxs("div",{className:"sidebar",children:[e.jsxs("div",{className:"action-buttons",children:[a.isHost?e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:"btn btn-primary btn-large",onClick:h,disabled:a.players.length<a.gameConfig.minPlayers,children:["ðŸŽ® Iniciar Jogo (",a.players.length,"/",a.gameConfig.minPlayers," min)"]}),a.players.length<a.gameConfig.maxPlayers&&e.jsx("button",{className:"btn btn-secondary",onClick:f,children:"ðŸ¤– Adicionar Bot"})]}):e.jsxs("div",{className:"waiting-message",children:[e.jsx("span",{className:"waiting-icon",children:"â³"}),"Aguardando o host iniciar o jogo..."]}),e.jsx("button",{className:"btn btn-ghost",onClick:c,children:"ðŸšª Sair da Sala"}),a.isHost&&e.jsxs("div",{className:"config-section",children:[e.jsx("button",{className:"config-toggle-btn",onClick:()=>u(!d),children:"âš™ï¸ ConfiguraÃ§Ãµes do Jogo"}),d&&e.jsxs("div",{className:"config-panel",children:[e.jsxs("div",{className:"config-grid",children:[e.jsxs("div",{className:"config-item",children:[e.jsx("label",{children:"Cartas por Jogador:"}),e.jsxs("select",{value:o.cardsPerPlayer,onChange:m=>S("cardsPerPlayer",parseInt(m.target.value)),children:[e.jsx("option",{value:7,children:"7 cartas (DifÃ­cil)"}),e.jsx("option",{value:10,children:"10 cartas (Normal)"}),e.jsx("option",{value:12,children:"12 cartas (FÃ¡cil)"})]})]}),e.jsxs("div",{className:"config-item",children:[e.jsx("label",{children:"Pontos para Vencer:"}),e.jsxs("select",{value:o.winningScore,onChange:m=>S("winningScore",parseInt(m.target.value)),children:[e.jsx("option",{value:3,children:"3 pontos (RÃ¡pido)"}),e.jsx("option",{value:5,children:"5 pontos (Normal)"}),e.jsx("option",{value:7,children:"7 pontos (Longo)"})]})]}),e.jsxs("div",{className:"config-item",children:[e.jsx("label",{children:"Tempo por Rodada:"}),e.jsxs("select",{value:o.roundTimer,onChange:m=>S("roundTimer",parseInt(m.target.value)),children:[e.jsx("option",{value:60,children:"1 minuto"}),e.jsx("option",{value:120,children:"2 minutos"}),e.jsx("option",{value:180,children:"3 minutos"}),e.jsx("option",{value:0,children:"Sem limite"})]})]}),e.jsxs("div",{className:"config-item",children:[e.jsx("label",{children:"MÃ¡ximo de Jogadores:"}),e.jsxs("select",{value:o.maxPlayers,onChange:m=>S("maxPlayers",parseInt(m.target.value)),children:[e.jsx("option",{value:4,children:"4 jogadores"}),e.jsx("option",{value:6,children:"6 jogadores"}),e.jsx("option",{value:8,children:"8 jogadores"}),e.jsx("option",{value:10,children:"10 jogadores"})]})]})]}),e.jsxs("div",{className:"config-buttons",children:[e.jsx("button",{className:"btn btn-primary",onClick:i,children:"Salvar ConfiguraÃ§Ãµes"}),e.jsx("button",{className:"btn btn-ghost",onClick:()=>u(!1),children:"Cancelar"})]})]})]})]}),e.jsxs("div",{className:"rules-section",children:[e.jsx("h3",{children:"Regras RÃ¡pidas"}),e.jsxs("div",{className:"rules-list",children:[e.jsxs("p",{children:["â€¢ Cada jogador recebe ",o.cardsPerPlayer," cartas de resposta"]}),e.jsx("p",{children:"â€¢ O FDP da vez lÃª uma pergunta preta"}),e.jsx("p",{children:"â€¢ Todos os outros jogadores escolhem uma carta branca"}),e.jsx("p",{children:"â€¢ O FDP escolhe a resposta mais engraÃ§ada/absurda"}),e.jsxs("p",{children:["â€¢ Primeiro a fazer ",o.winningScore," pontos vence!"]}),e.jsx("p",{children:"â€¢ ConteÃºdo adulto - jogadores devem ter +18 anos"})]})]})]}),a.error&&e.jsxs("div",{className:"error-message",children:[e.jsx("span",{className:"error-icon",children:"âš ï¸"}),a.error,e.jsx("button",{className:"error-close",onClick:()=>s.setError(null),children:"Ã—"})]}),a.kickedMessage&&e.jsx("div",{className:"modal-overlay",role:"dialog","aria-modal":"true","aria-labelledby":"kicked-title",children:e.jsxs("div",{className:"modal-card",children:[e.jsx("h3",{id:"kicked-title",className:"modal-title",children:"VocÃª foi removido"}),e.jsx("p",{className:"modal-text",children:a.kickedMessage}),e.jsx("div",{className:"modal-actions",children:e.jsx("button",{className:"btn btn-primary",onClick:()=>{s.setKickedMessage(null),s.setGameState(r.LOBBY),s.resetGame()},children:"OK"})})]})})]})})}function se({selectedCard:a,onCardSelect:s}){const{state:r}=C(),o=r.playerHands[r.currentPlayer?.id]||[],t=d=>{s(a===d?null:d)};return o.length===0?e.jsx("div",{className:"player-hand",children:e.jsx("div",{className:"no-cards",children:e.jsx("p",{children:"Carregando suas cartas..."})})}):e.jsxs("div",{className:"player-hand",children:[e.jsxs("div",{className:"hand-header",children:[e.jsx("h3",{children:a?e.jsxs(e.Fragment,{children:["âœ“ Carta Selecionada (",o.length-1," restantes)"]}):e.jsxs(e.Fragment,{children:["ðŸŽ¯ Suas Cartas (",o.length,")"]})}),e.jsx("p",{children:a?"Carta escolhida! Confirme sua jogada abaixo ðŸ‘‡":"Clique em uma carta para selecionÃ¡-la"})]}),e.jsx("div",{className:"cards-container",children:e.jsx("div",{className:"cards-grid",children:o.map((d,u)=>e.jsx("div",{className:`answer-card ${a===d?"selected":""}`,onClick:()=>t(d),children:e.jsxs("div",{className:"card-content",children:[e.jsx("div",{className:"card-text",children:d}),a===d&&e.jsx("div",{className:"selection-indicator",children:e.jsx("span",{className:"check-icon",children:"âœ“"})})]})},`${d}-${u}`))})})]})}function re({question:a,answers:s,onSelectWinner:r,canVote:o,currentPlayer:t,order:d}){const u=Object.entries(s),_=d&&Array.isArray(d)&&d.length?d.filter(c=>s[c]!==void 0).map(c=>[c,s[c]]):u.sort((c,S)=>c[0].localeCompare(S[0])),E=(c,S)=>c.replace("______",`**${S}**`),h=c=>{o&&r(c)};return e.jsxs("div",{className:"submitted-answers",children:[e.jsxs("div",{className:"answers-header",children:[e.jsx("h3",{children:o?"ðŸ‘‘ Escolha a melhor resposta clicando nela:":"ðŸ—³ï¸ Respostas submetidas:"}),e.jsx("p",{className:"voting-instruction",children:o?"Como FDP desta rodada, vocÃª decide qual resposta ganha!":"Aguarde o FDP escolher a melhor resposta..."})]}),e.jsx("div",{className:"answers-grid",children:_.map(([c,S],i)=>{const g=c===t?.id;return e.jsxs("div",{className:`answer-option ${o?"votable":""} ${g?"own-answer":""}`,onClick:()=>h(c),children:[e.jsx("div",{className:"answer-number",children:i+1}),e.jsxs("div",{className:"answer-content",children:[e.jsx("div",{className:"complete-sentence",children:E(a,S)}),e.jsxs("div",{className:"answer-highlight",children:[e.jsx("span",{className:"answer-label",children:"Resposta:"}),e.jsx("span",{className:"answer-text",children:S})]})]}),o&&e.jsxs("div",{className:"vote-indicator",children:[e.jsx("span",{className:"vote-icon",children:"ðŸ‘†"}),e.jsx("span",{className:"vote-text",children:"Votar"})]}),g&&e.jsx("div",{className:"own-answer-badge",children:e.jsx("span",{children:"Sua resposta"})})]},c)})}),!o&&e.jsxs("div",{className:"waiting-for-vote",children:[e.jsx("div",{className:"waiting-animation",children:e.jsxs("span",{className:"waiting-dots",children:[e.jsx("span",{}),e.jsx("span",{}),e.jsx("span",{})]})}),e.jsx("p",{children:"â³ Aguardando a decisÃ£o do FDP..."})]})]})}function oe(){const{state:a}=C();if(a.timeRemaining===null||a.timeRemaining===void 0)return null;const s=Math.floor(a.timeRemaining/60),r=a.timeRemaining%60,o=`${s}:${r.toString().padStart(2,"0")}`;a.gameConfig.roundTimer>0&&a.timeRemaining/a.gameConfig.roundTimer*100;const t=a.timeRemaining<=30,d=a.timeRemaining<=10;return e.jsx("div",{className:`timer ${t?"urgent":""} ${d?"critical":""}`,children:e.jsxs("div",{className:"timer-display",children:[e.jsx("span",{className:"timer-icon",children:"â±ï¸"}),e.jsx("span",{className:"timer-text",children:o})]})})}function R({showFinal:a=!1,showStatsOnly:s=!1}){const{state:r}=C();if(s)return e.jsx("div",{className:"scoreboard stats-only",children:e.jsxs("div",{className:"game-stats",children:[e.jsx("h3",{children:"ðŸ“ˆ EstatÃ­sticas do Jogo"}),e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-value",children:r.gameHistory.length}),e.jsx("span",{className:"stat-label",children:"Rodadas Jogadas"})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-value",children:r.players.length}),e.jsx("span",{className:"stat-label",children:"Jogadores"})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-value",children:Math.max(...Object.values(r.scores))}),e.jsx("span",{className:"stat-label",children:"Maior PontuaÃ§Ã£o"})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-value",children:r.usedQuestionCards.length}),e.jsx("span",{className:"stat-label",children:"Perguntas Usadas"})]})]})]})});const o=[...r.players].sort((u,_)=>(r.scores[_.id]||0)-(r.scores[u.id]||0)),t=u=>{switch(u){case 0:return"ðŸ¥‡";case 1:return"ðŸ¥ˆ";case 2:return"ðŸ¥‰";default:return`${u+1}Âº`}},d=u=>{switch(u){case 0:return"first-place";case 1:return"second-place";case 2:return"third-place";default:return""}};return e.jsxs("div",{className:"scoreboard",children:[e.jsxs("div",{className:"scoreboard-header",children:[e.jsx("h2",{children:a?"ðŸ† Placar Final":"ðŸ“Š Placar Atual"}),e.jsx("p",{className:"winning-score",children:a?"ParabÃ©ns ao vencedor!":`Primeiro a fazer ${r.gameConfig.winningScore} pontos vence!`})]}),e.jsx("div",{className:"players-ranking",children:o.map((u,_)=>{const E=r.scores[u.id]||0,h=a&&_===0,c=u.id===r.currentFDP,S=u.id===r.currentPlayer?.id;return e.jsxs("div",{className:`player-rank ${d(_)} ${h?"winner":""} ${c?"current-fdp":""} ${S?"current-player":""}`,children:[e.jsx("div",{className:"rank-position",children:t(_)}),e.jsxs("div",{className:"player-info",children:[e.jsxs("div",{className:"player-avatar",children:[e.jsx("img",{src:u.avatar,alt:u.name}),c&&e.jsx("span",{className:"fdp-crown",children:"ðŸ‘‘"}),u.isBot&&e.jsx("span",{className:"bot-badge",children:"ðŸ¤–"})]}),e.jsxs("div",{className:"player-details",children:[e.jsxs("div",{className:"player-name",children:[u.name,S&&e.jsx("span",{className:"you-badge",children:"VocÃª"})]}),e.jsx("div",{className:"player-status",children:c?"FDP da vez":u.isBot?"Bot":"Jogador"})]})]}),e.jsxs("div",{className:"player-score",children:[e.jsx("div",{className:"score-number",children:E}),e.jsx("div",{className:"score-label",children:E===1?"ponto":"pontos"})]}),e.jsxs("div",{className:"score-progress",children:[e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:`${E/r.gameConfig.winningScore*100}%`}})}),e.jsxs("div",{className:"progress-text",children:[E,"/",r.gameConfig.winningScore]})]}),h&&e.jsxs("div",{className:"winner-effects",children:[e.jsx("span",{className:"trophy",children:"ðŸ†"}),e.jsx("span",{className:"confetti",children:"ðŸŽ‰"})]})]},u.id)})}),!a&&r.gameHistory.length>0&&e.jsxs("div",{className:"recent-rounds",children:[e.jsx("h3",{children:"ðŸ• Ãšltimas Rodadas"}),e.jsx("div",{className:"rounds-list",children:r.gameHistory.slice(-3).reverse().map((u,_)=>{const E=r.players.find(h=>h.id===u.winner);return e.jsxs("div",{className:"round-item",children:[e.jsxs("div",{className:"round-winner",children:[e.jsx("img",{src:E?.avatar,alt:E?.name}),e.jsx("span",{children:E?.name})]}),e.jsxs("div",{className:"round-answer",children:['"',u.answers[u.winner],'"']})]},_)})})]})]})}function le(){const{state:a,actions:s,GAME_STATES:r}=C(),[o,t]=x.useState(null),[d,u]=x.useState(!1),[_,E]=x.useState(0),[h,c]=x.useState(""),S=a.currentPlayer?.id===a.currentFDP,i=a.submittedAnswers[a.currentPlayer?.id],g=a.players.filter(p=>p.id!==a.currentFDP).every(p=>a.submittedAnswers[p.id]);x.useEffect(()=>{console.log("GameBoard Debug:",{currentPlayer:a.currentPlayer?.name,currentFDP:a.players.find(p=>p.id===a.currentFDP)?.name,currentFDPId:a.currentFDP,isCurrentPlayerFDP:S,gameState:a.gameState,selectedAnswerCard:o,hasSubmittedAnswer:i,shouldShowButton:a.gameState===r.PLAYING&&!S,allPlayers:a.players.map(p=>({id:p.id,name:p.name}))}),a.gameState===r.PLAYING&&!a.currentFDP&&console.error("ERRO CRÃTICO: Jogo em andamento mas nenhum FDP definido!")},[a.currentPlayer,a.currentFDP,a.gameState,r.PLAYING,S,a.players,o,i]),x.useEffect(()=>{},[g,a.gameState,S]),x.useEffect(()=>{c(Z(a.gameState))},[a.gameState]),x.useEffect(()=>{if(a.gameState===r.ROUND_RESULTS){const p=a.gameConfig?.resultsDelaySec??3;E(p);const y=setInterval(()=>{E(T=>T>0?T-1:0)},1e3);return()=>clearInterval(y)}else E(0)},[a.gameState,r.ROUND_RESULTS,a.gameConfig?.resultsDelaySec]);const f=()=>{o&&!i&&(s.submitAnswer(o),t(null))},m=p=>{S&&a.gameState===r.ROUND_VOTING&&s.selectWinner(p)},j=(p,y=null)=>p?y?p.replace("______",`**${y}**`):p:"",l=()=>{window.confirm("Tem certeza que deseja sair do jogo?")&&s.resetGame()},v=a.gameState===r.ROUND_RESULTS?" emote-celebrate":a.error?" emote-shake":"";return e.jsxs("div",{className:"game-board",children:[e.jsxs("div",{className:"game-header",children:[e.jsxs("div",{className:"game-info",children:[e.jsx(P,{variant:"inline",className:"mascot-inline"+v,speech:h}),e.jsx("span",{className:"game-title",children:"Foi De PropÃ³sito"}),e.jsx("div",{style:{marginLeft:"20px"},children:e.jsx(oe,{})})]}),e.jsxs("div",{className:"header-actions",children:[e.jsxs("button",{className:"scoreboard-btn btn btn-secondary",onClick:()=>u(!0),children:[e.jsx("span",{role:"img","aria-label":"Placar",children:"ðŸ“Š"})," Placar"]}),e.jsxs("button",{className:"leave-btn btn btn-ghost",onClick:l,children:[e.jsx("span",{role:"img","aria-label":"Sair",children:"ðŸšª"})," Sair"]})]})]}),a.gameState!==r.GAME_OVER&&e.jsx("div",{className:"question-section",children:e.jsxs("div",{className:"question-card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("span",{className:"card-type",children:"Carta de Pergunta"}),e.jsx("div",{className:"fdp-indicator",children:(()=>{const p=a.players.find(y=>y.id===a.currentFDP);return p?e.jsxs(e.Fragment,{children:["ðŸ‘‘ FDP: ",p.name,S&&e.jsx("span",{className:"you-badge",children:" (VOCÃŠ!)"})]}):e.jsx("span",{style:{color:"red"},children:"âš ï¸ ERRO: Nenhum FDP definido!"})})()})]}),e.jsx("div",{className:"question-text",children:j(a.currentQuestionCard)})]})}),e.jsxs("div",{className:"game-main",children:[a.gameState===r.PLAYING&&!S&&e.jsx(se,{selectedCard:o,onCardSelect:t}),a.gameState===r.PLAYING&&S&&e.jsx("div",{className:"fdp-waiting-section",children:e.jsxs("div",{className:"fdp-instructions",children:[e.jsx("h2",{children:"ðŸ‘‘ VocÃª Ã© o FDP desta rodada!"}),e.jsx("p",{children:"Aguarde os outros jogadores enviarem suas respostas..."}),e.jsxs("div",{className:"fdp-status",children:[e.jsxs("div",{className:"responses-counter",children:[e.jsx("span",{children:Object.keys(a.submittedAnswers).length}),e.jsxs("span",{children:["/",a.players.filter(p=>p.id!==a.currentFDP).length]}),e.jsx("span",{children:" respostas recebidas"})]}),Object.keys(a.submittedAnswers).length<a.players.filter(p=>p.id!==a.currentFDP).length&&e.jsxs("div",{className:"waiting-animation",children:[e.jsxs("span",{className:"waiting-dots",children:[e.jsx("span",{}),e.jsx("span",{}),e.jsx("span",{})]}),e.jsx("p",{children:"Aguardando respostas..."})]})]})]})}),a.gameState===r.PLAYING&&!S&&e.jsx("button",{className:`btn btn-primary submit-answer-btn ${o?"has-selection":""} ${i?"submitted":""}`,onClick:f,disabled:!o||i,style:{position:"fixed",bottom:"30px",left:"50%",transform:"translateX(-50%)",zIndex:"9997",backgroundColor:o?"#28a745":"#6c757d",border:"none",padding:"15px 30px",fontSize:"1.2rem",fontWeight:"700",borderRadius:"15px",boxShadow:"0 8px 25px rgba(0,0,0,0.3)",color:"white"},children:i?e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"âœ“"})," Resposta enviada!"]}):o?e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"ðŸ“¤"})," Enviar resposta"]}):"Selecione uma carta"}),a.gameState===r.ROUND_VOTING&&e.jsx(re,{question:a.currentQuestionCard,answers:a.submittedAnswers,onSelectWinner:m,canVote:S,currentPlayer:a.currentPlayer,order:a.answerOrder}),a.gameState===r.ROUND_RESULTS&&e.jsxs("div",{className:"round-results-section",children:[e.jsxs("div",{className:"celebration-header",children:[e.jsx("div",{className:"confetti-animation"}),e.jsx("div",{className:"trophy-bounce",children:e.jsx("span",{className:"celebration-trophy",children:"ðŸ†"})}),e.jsx("h1",{className:"celebration-title",children:"Rodada Finalizada!"}),e.jsx("div",{className:"celebration-subtitle",children:"E o vencedor Ã©..."})]}),e.jsxs("div",{className:"winner-spotlight",children:[e.jsxs("div",{className:"winner-avatar-container",children:[e.jsxs("div",{className:"winner-avatar",children:[e.jsx("div",{className:"avatar-initials",children:a.roundWinner&&a.players.find(p=>p.id===a.roundWinner)?.name?.slice(0,2).toUpperCase()||"??"}),e.jsx("div",{className:"winner-crown",children:"ðŸ‘‘"})]}),e.jsx("div",{className:"winner-glow"})]}),e.jsxs("div",{className:"winner-info",children:[e.jsx("h2",{className:"winner-name",children:a.roundWinner&&a.players.find(p=>p.id===a.roundWinner)?.name||"AnÃ´nimo"}),e.jsx("div",{className:"winner-title",children:"ðŸŽ­ FDP da Rodada"})]})]}),e.jsxs("div",{className:"winning-answer-showcase",children:[e.jsxs("div",{className:"question-display",children:[e.jsx("h3",{children:"ðŸŽ¯ Pergunta da Rodada:"}),e.jsx("div",{className:"question-card-display",children:a.currentQuestionCard})]}),e.jsxs("div",{className:"answer-spotlight",children:[e.jsx("h3",{children:"âœ¨ Resposta Vencedora:"}),e.jsxs("div",{className:"winning-answer-card",children:[e.jsxs("div",{className:"answer-content",children:['"',a.submittedAnswers[a.roundWinner]||"Resposta nÃ£o encontrada",'"']}),e.jsxs("div",{className:"answer-sparkles",children:[e.jsx("span",{children:"âœ¨"}),e.jsx("span",{children:"ðŸŽ‰"}),e.jsx("span",{children:"â­"})]})]})]}),e.jsxs("div",{className:"complete-sentence-display",children:[e.jsx("h4",{children:"ðŸ“ Frase Completa:"}),e.jsx("div",{className:"complete-sentence",children:j(a.currentQuestionCard,a.submittedAnswers[a.roundWinner])})]})]}),e.jsx("div",{className:"next-round-countdown",children:e.jsxs("div",{className:"countdown-container",children:[e.jsx("div",{className:"countdown-circle",children:e.jsx("div",{className:"countdown-number",children:_})}),e.jsxs("div",{className:"countdown-text",children:[e.jsx("span",{className:"next-round-label",children:"PrÃ³xima rodada em"}),e.jsx("span",{className:"countdown-subtitle",children:"Prepare-se! ðŸš€"})]})]})}),e.jsxs("div",{className:"mini-scoreboard",children:[e.jsx("h3",{children:"ðŸ† Placar Atual"}),e.jsx("div",{className:"mini-scores",children:a.players.sort((p,y)=>(a.scores[y.id]||0)-(a.scores[p.id]||0)).slice(0,3).map((p,y)=>e.jsxs("div",{className:`mini-score-item rank-${y+1}`,children:[e.jsx("span",{className:"rank-emoji",children:y===0?"ðŸ¥‡":y===1?"ðŸ¥ˆ":"ðŸ¥‰"}),e.jsx("span",{className:"player-name",children:p.name}),e.jsx("span",{className:"player-score",children:a.scores[p.id]||0})]},p.id))})]})]}),a.gameState===r.GAME_OVER&&e.jsxs("div",{className:"game-over-section expanded-game-over",children:[e.jsxs("div",{className:"expanded-final-winner",children:[e.jsxs("div",{className:"expanded-winner-podium",children:[e.jsx("span",{className:"trophy",role:"img","aria-label":"TrofÃ©u",children:"ðŸ†"}),e.jsx("div",{className:"expanded-final-winner-avatar",children:e.jsx("span",{className:"winner-initials",children:a.players.find(p=>p.id===a.roundWinner)?.name?.slice(0,2).toUpperCase()})})]}),e.jsxs("div",{className:"winner-joke",children:[e.jsx("strong",{children:a.players.find(p=>p.id===a.roundWinner)?.name}),e.jsx("br",{}),"Ã‰ o grande FDP vencedor!"]})]}),e.jsxs("div",{className:"expanded-content-grid",children:[e.jsx("div",{className:"expanded-left-column",children:e.jsx("div",{className:"expanded-scoreboard-wrapper",children:e.jsx(R,{showFinal:!0})})}),e.jsx("div",{className:"expanded-right-column",children:e.jsx("div",{className:"expanded-stats-wrapper",children:e.jsx(R,{showFinal:!0,showStatsOnly:!0})})})]}),e.jsx("div",{className:"expanded-game-over-actions",children:e.jsx("button",{className:"btn btn-primary",onClick:l,children:"Voltar ao Lobby"})})]})]}),d&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content",children:[e.jsx("button",{className:"close-modal-btn",onClick:()=>u(!1),children:"Ã—"}),e.jsx(R,{})]})})]})}export{ie as G,te as L,ce as W,le as a,e as j,x as r,C as u};
